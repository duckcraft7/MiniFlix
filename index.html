<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miniflix LG TV</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos para o Popup (Modal) */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            padding: 50px;
        }

        .modal-content {
            background-color: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            height: 80%;
            display: flex;
            gap: 20px;
            position: relative;
        }

        .modal-sidebar {
            width: 30%;
            overflow-y: auto;
        }

        .modal-main-content {
            width: 70%;
            overflow-y: auto;
        }

        .modal-sidebar h3, .modal-main-content h3 {
            color: #e50914;
        }

        .modal-list {
            list-style: none;
            padding: 0;
        }

        .modal-list li {
            padding: 10px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .modal-list li:hover, .modal-list li.selecionado {
            background-color: #333;
        }

        /* Estilos para o Player de Vídeo */
        .video-container {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            padding: 0;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            display: block;
        }

        .video-container .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #e50914;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            z-index: 4000;
        }
    </style>
</head>
<body>
    <h1>Miniflix</h1>

    <div class="navegacao">
        <button id="btn-filmes" class="ativo" tabindex="0">Filmes</button>
        <button id="btn-series" tabindex="1">Séries</button>
    </div>

    <section>
        <div id="lista-conteudo" class="lista-conteudo">
            <p>Carregando conteúdo...</p>
        </div>
    </section>

    <div id="series-modal" class="modal">
        <div class="modal-content">
            <div class="modal-sidebar">
                <h3>Temporadas</h3>
                <ul id="seasons-list" class="modal-list">
                    </ul>
            </div>
            <div class="modal-main-content">
                <h3>Episódios</h3>
                <ul id="episodes-list" class="modal-list">
                    </ul>
            </div>
        </div>
    </div>

    <div id="video-container" class="video-container">
        <span id="close-player" class="close-btn">&times;</span>
        </div>

    <script>
        const filmesData = [
            {
                titulo: "Cronicas de Narnia: Príncipe Caspian",
                imagem_url: "https://i.imgur.com/6EEo3Up.jpeg",
                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2FFilme2%3A3?r=56naN6JoAapUYszd6LboKc1nnse45nAX",
                type: 'video'
            },
            {
                titulo: "Cronicas de Narnia: Leão e a Feiticeira do Guarda Roupa",
                imagem_url: "https://i.imgur.com/wci8bLN.jpeg",
                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2Ffilmes1%3Aa?r=56naN6JoAapUYszd6LboKc1nnse45nAX",
                type: 'video'
            },
            {
                titulo: "Cronicas de Narnia: A viagem do Peregrino da Alvorada",
                imagem_url: "https://i.imgur.com/2RHgpjm.jpeg",
                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2FCronicas-de-Narnia--A-via%3A2?r=56naN6JoAapUYszd6LboKc1nnse45nAX",
                type: 'video'
            }
        ];
        
        const seriesData = [
            {
                titulo: "My Little Pony",
                imagem_url: "https://i.imgur.com/gMguNBs.jpeg",
                type: 'series',
                temporadas: [
                    {
                        titulo: "Temporada 1",
                        episodios: [
                            {
                                titulo: "Episódio 1",
                                video_url: "https://odysee.com/$/embed/@FilmesBolados:a/My-Little-Pony-EP01:d?r=56naN6JoAapUYszd6LboKc1nnse45nAX&signature=88af0dbfc7072ebcf228fb6767ae5e46fd9b2c8be8224f41d99acd80d51721617c3034db7f22c00ac712659e4e88ae8856c79e849ce0a3a1d9f3f41b14aa3f89&signature_ts=1758554770"
                            },
                            {
                                titulo: "Episódio 2",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2FMy-Little-Pony-EP02%3Ad?r=56naN6JoAapUYszd6LboKc1nnse45nAX&signature=7ad0148ca20b560bc4a3c0ba109d01f232951124709e2a4580c26db4b1be864b49c19fa2a502e79d6be45caa17fc536a149980aba12d5c457cc76b21e82db558&signature_ts=1758554928"
                            },
                            {
                                titulo: "Episódio 3",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X03---The-Ticket-Master%3A2?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 4",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X04---Applebuck-Season%3A1?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 5",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X05---Griffon-the-Brush-Off%3Af?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 6",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X06---Boast-Busters%3Ac?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 7",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X07---Dragonshy%3Af?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 8",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X08---Look-Before-You-Sleep%3A7?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 9",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X09---Bridle-Gossip%3A1?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                            {
                                titulo: "Episódio 10",
                                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2F1X10---Swarm-of-the-Century%3Aa?r=56naN6JoAapUYszd6LboKc1nnse45nAX"
                            },
                        ]
                    }
                ]
            }
        ];

        let conteudoAtual = filmesData;
        let itemSelecionadoIndex = 0;
        let isPlayerActive = false;
        let currentFocus = 'buttons';

        const videoContainer = document.getElementById('video-container');
        const seriesModal = document.getElementById('series-modal');
        const seasonsList = document.getElementById('seasons-list');
        const episodesList = document.getElementById('episodes-list');
        const videoCloseBtn = document.getElementById('close-player');

        const filmesBtn = document.getElementById('btn-filmes');
        const seriesBtn = document.getElementById('btn-series');
        const navButtons = [filmesBtn, seriesBtn];

        function renderizarConteudo(conteudo) {
            const lista = document.getElementById('lista-conteudo');
            lista.innerHTML = '';
            
            if (conteudo.length === 0) {
                lista.innerHTML = '<p>Nenhum item encontrado.</p>';
                return;
            }

            conteudo.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.classList.add('item-conteudo');
                itemElement.setAttribute('tabindex', index);
                
                const imagemElement = document.createElement('img');
                imagemElement.src = item.imagem_url || (item.episodios ? item.imagem_url : 'https://via.placeholder.com/200x300.png?text=Episodio');
                imagemElement.alt = item.titulo;
                
                itemElement.appendChild(imagemElement);
                lista.appendChild(itemElement);
            });
            
            const itensDOM = document.querySelectorAll('.item-conteudo');
            if (itensDOM.length > 0) {
                itemSelecionadoIndex = 0;
                itensDOM[itemSelecionadoIndex].classList.add('selecionado');
                itensDOM[itemSelecionadoIndex].focus();
                currentFocus = 'content';
            } else {
                currentFocus = 'buttons';
                navButtons[0].focus();
            }
        }
        
        function abrirModalSeries(temporadas) {
            seriesModal.style.display = 'flex';
            seasonsList.innerHTML = '';
            episodesList.innerHTML = '';

            temporadas.forEach((temporada, index) => {
                const li = document.createElement('li');
                li.textContent = temporada.titulo;
                li.setAttribute('tabindex', index);
                seasonsList.appendChild(li);

                li.addEventListener('click', () => {
                    document.querySelectorAll('#seasons-list li').forEach(el => el.classList.remove('selecionado'));
                    li.classList.add('selecionado');
                    renderizarEpisodios(temporada.episodios);
                });

                if (index === 0) {
                    li.click();
                }
            });
            currentFocus = 'seasons';
        }

        function renderizarEpisodios(episodios) {
            episodesList.innerHTML = '';
            episodios.forEach((episodio, index) => {
                const li = document.createElement('li');
                li.textContent = episodio.titulo;
                li.setAttribute('tabindex', index);
                episodesList.appendChild(li);

                li.addEventListener('click', () => {
                    videoContainer.innerHTML = `<span id="close-player" class="close-btn">&times;</span>`;
                    const iframe = document.createElement('iframe');
                    iframe.src = episodio.video_url;
                    iframe.setAttribute('width', '100%');
                    iframe.setAttribute('height', '100%');
                    iframe.setAttribute('allowfullscreen', true);
                    iframe.setAttribute('webkitallowfullscreen', true);
                    iframe.setAttribute('mozallowfullscreen', true);
                    iframe.setAttribute('frameborder', '0');

                    videoContainer.style.display = 'block';
                    videoContainer.appendChild(iframe);
                    
                    const newCloseBtn = document.getElementById('close-player');
                    newCloseBtn.addEventListener('click', () => {
                        videoContainer.innerHTML = '';
                        videoContainer.style.display = 'none';
                    });
                });
            });
            currentFocus = 'episodes';
        }

        filmesBtn.addEventListener('click', () => {
            filmesBtn.classList.add('ativo');
            seriesBtn.classList.remove('ativo');
            renderizarConteudo(filmesData);
            currentFocus = 'content';
        });

        seriesBtn.addEventListener('click', () => {
            seriesBtn.classList.add('ativo');
            filmesBtn.classList.remove('ativo');
            renderizarConteudo(seriesData);
            currentFocus = 'content';
        });

        navButtons[0].addEventListener('focus', () => {
            currentFocus = 'buttons';
            navButtons[1].classList.remove('selecionado');
            navButtons[0].classList.add('selecionado');
        });
        
        navButtons[1].addEventListener('focus', () => {
            currentFocus = 'buttons';
            navButtons[0].classList.remove('selecionado');
            navButtons[1].classList.add('selecionado');
        });

        document.addEventListener('keydown', (event) => {
            const key = event.key;
            const itensDOM = document.querySelectorAll('.item-conteudo');
            const navButtonsDOM = document.querySelectorAll('.navegacao button');

            if (isPlayerActive) {
                if (key === 'Escape' || key === 'Back') {
                    isPlayerActive = false;
                    videoContainer.innerHTML = '';
                    videoContainer.style.display = 'none';
                    itensDOM[itemSelecionadoIndex].focus();
                }
                return;
            }

            if (seriesModal.style.display === 'flex') {
                const seasonsDOM = document.querySelectorAll('#seasons-list li');
                const episodesDOM = document.querySelectorAll('#episodes-list li');
                let seasonIndex = Array.from(seasonsDOM).findIndex(el => el.classList.contains('selecionado'));
                let episodeIndex = Array.from(episodesDOM).findIndex(el => el.classList.contains('selecionado'));

                if (key === 'Escape' || key === 'Back') {
                    seriesModal.style.display = 'none';
                    itensDOM[itemSelecionadoIndex].focus();
                } else if (key === 'ArrowUp' && currentFocus === 'seasons') {
                    if (seasonIndex > 0) {
                        seasonsDOM[seasonIndex].classList.remove('selecionado');
                        seasonIndex--;
                        seasonsDOM[seasonIndex].click();
                        seasonsDOM[seasonIndex].focus();
                    }
                } else if (key === 'ArrowDown' && currentFocus === 'seasons') {
                    if (seasonIndex < seasonsDOM.length - 1) {
                        seasonsDOM[seasonIndex].classList.remove('selecionado');
                        seasonIndex++;
                        seasonsDOM[seasonIndex].click();
                        seasonsDOM[seasonIndex].focus();
                    }
                } else if (key === 'ArrowRight' && currentFocus === 'seasons') {
                    seasonsDOM[seasonIndex].classList.remove('selecionado');
                    episodesDOM[0].classList.add('selecionado');
                    episodesDOM[0].focus();
                    currentFocus = 'episodes';
                } else if (key === 'ArrowLeft' && currentFocus === 'episodes') {
                    episodesDOM[episodeIndex].classList.remove('selecionado');
                    seasonsDOM[seasonIndex].classList.add('selecionado');
                    seasonsDOM[seasonIndex].focus();
                    currentFocus = 'seasons';
                } else if (key === 'ArrowUp' && currentFocus === 'episodes') {
                    if (episodeIndex > 0) {
                        episodesDOM[episodeIndex].classList.remove('selecionado');
                        episodeIndex--;
                        episodesDOM[episodeIndex].classList.add('selecionado');
                        episodesDOM[episodeIndex].focus();
                    }
                } else if (key === 'ArrowDown' && currentFocus === 'episodes') {
                    if (episodeIndex < episodesDOM.length - 1) {
                        episodesDOM[episodeIndex].classList.remove('selecionado');
                        episodeIndex++;
                        episodesDOM[episodeIndex].classList.add('selecionado');
                        episodesDOM[episodeIndex].focus();
                    }
                } else if (key === 'Enter') {
                    if (currentFocus === 'episodes') {
                        episodesDOM[episodeIndex].click();
                    } else if (currentFocus === 'seasons') {
                        // Clicar na temporada já renderiza os episódios, então o enter aqui não faria nada além de recarregar a lista.
                    }
                }

                return;
            }
            
            if (itensDOM.length === 0) return;

            itensDOM[itemSelecionadoIndex].classList.remove('selecionado');

            if (key === 'ArrowRight' && itemSelecionadoIndex < itensDOM.length - 1) {
                itemSelecionadoIndex++;
            } else if (key === 'ArrowLeft' && itemSelecionadoIndex > 0) {
                itemSelecionadoIndex--;
            } else if (key === 'ArrowUp') {
                navButtonsDOM[0].classList.add('selecionado');
                navButtonsDOM[0].focus();
                itensDOM[itemSelecionadoIndex].classList.remove('selecionado');
                currentFocus = 'buttons';
            } else if (key === 'Enter') {
                itensDOM[itemSelecionadoIndex].click();
            }

            if (currentFocus === 'content') {
                itensDOM[itemSelecionadoIndex].classList.add('selecionado');
                itensDOM[itemSelecionadoIndex].focus();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderizarConteudo(filmesData);
        });
    </script>
</body>
</html>
