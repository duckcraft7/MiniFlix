<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miniflix Linux</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Miniflix</h1>

    <div class="navegacao">
        <button id="btn-filmes" class="ativo">Filmes</button>
        <button id="btn-series">Séries</button>
    </div>

    <section>
        <div id="lista-conteudo" class="lista-conteudo">
            <p>Carregando conteúdo...</p>
        </div>
    </section>

    <div id="video-container" class="video-container">
        </div>

    <script>
        // Estrutura de dados para filmes
        const filmesData = [
            {
                titulo: "Filme Teste",
                imagem_url: "https://i.imgur.com/6EEo3Up.jpeg",
                video_url: "https://odysee.com/%24/embed/%40FilmesBolados%3Aa%2FFilme2%3A3?r=56naN6JoAapUYszd6LboKc1nnse45nAX",
                type: 'video'
            }
        ];
        
        // Estrutura de dados para séries
        const seriesData = [
            {
                titulo: "Nome da Série",
                imagem_url: "https://i.imgur.com/link-da-capa-da-serie.jpeg",
                type: 'series',
                temporadas: [
                    {
                        titulo: "Temporada 1",
                        episodios: [
                            {
                                titulo: "Episódio 1",
                                imagem_url: "https://i.imgur.com/link-da-capa-do-ep1.jpeg",
                                video_url: "https://odysee.com/%24/embed/%40Canal:a/serie-ep1:b"
                            },
                            {
                                titulo: "Episódio 2",
                                imagem_url: "https://i.imgur.com/link-da-capa-do-ep2.jpeg",
                                video_url: "https://odysee.com/%24/embed/%40Canal:a/serie-ep2:c"
                            }
                        ]
                    },
                    {
                        titulo: "Temporada 2",
                        episodios: [
                            {
                                titulo: "Episódio 1",
                                imagem_url: "https://i.imgur.com/link-da-capa-do-ep3.jpeg",
                                video_url: "https://odysee.com/%24/embed/%40Canal:a/serie-ep3:d"
                            }
                        ]
                    }
                ]
            }
        ];

        let conteudoAtual = filmesData;
        let historico = []; // Para navegação de volta
        
        const videoContainer = document.getElementById('video-container');

        function renderizarConteudo(conteudo) {
            const lista = document.getElementById('lista-conteudo');
            lista.innerHTML = '';
            
            if (conteudo.length === 0) {
                lista.innerHTML = '<p>Nenhum item encontrado.</p>';
                return;
            }

            conteudo.forEach((item) => {
                const itemElement = document.createElement('div');
                itemElement.classList.add('item-conteudo');
                
                const imagemElement = document.createElement('img');
                imagemElement.src = item.imagem_url;
                imagemElement.alt = item.titulo;
                
                itemElement.addEventListener('click', () => {
                    if (item.type === 'video') {
                        // Se for um filme ou episódio, reproduz
                        videoContainer.innerHTML = ''; 
                        const iframe = document.createElement('iframe');
                        iframe.src = item.video_url;
                        iframe.setAttribute('width', '100%');
                        iframe.setAttribute('height', '100%');
                        iframe.setAttribute('allowfullscreen', true);
                        iframe.setAttribute('webkitallowfullscreen', true);
                        iframe.setAttribute('mozallowfullscreen', true);
                        iframe.setAttribute('frameborder', '0');

                        videoContainer.style.display = 'block';
                        videoContainer.appendChild(iframe);
                    } else if (item.type === 'series') {
                        // Se for uma série, navega para a tela de temporadas
                        historico.push(conteudoAtual);
                        conteudoAtual = item.temporadas;
                        renderizarConteudo(item.temporadas);
                    } else if (item.episodios) {
                        // Se for uma temporada, navega para a tela de episódios
                        historico.push(conteudoAtual);
                        conteudoAtual = item.episodios;
                        renderizarConteudo(item.episodios);
                    }
                });

                itemElement.appendChild(imagemElement);
                lista.appendChild(itemElement);
            });
        }
        
        document.getElementById('btn-filmes').addEventListener('click', () => {
            document.getElementById('btn-filmes').classList.add('ativo');
            document.getElementById('btn-series').classList.remove('ativo');
            historico = [];
            conteudoAtual = filmesData;
            renderizarConteudo(filmesData);
        });

        document.getElementById('btn-series').addEventListener('click', () => {
            document.getElementById('btn-series').classList.add('ativo');
            document.getElementById('btn-filmes').classList.remove('ativo');
            historico = [];
            conteudoAtual = seriesData;
            renderizarConteudo(seriesData);
        });
        
        // Adiciona um listener para o botão de voltar do teclado
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' || event.key === 'Back' || event.key === 'Backspace') {
                if (historico.length > 0) {
                    conteudoAtual = historico.pop();
                    renderizarConteudo(conteudoAtual);
                } else {
                    // Se não houver histórico, esconde o player (se estiver ativo)
                    if (videoContainer.style.display === 'block') {
                        videoContainer.innerHTML = '';
                        videoContainer.style.display = 'none';
                    }
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderizarConteudo(filmesData);
        });
    </script>
</body>
</html>
